package services;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;

import com.mashape.unirest.http.HttpResponse;
import com.mashape.unirest.http.Unirest;
import com.mashape.unirest.http.exceptions.UnirestException;
import com.mashape.unirest.request.body.Body;
import com.mashape.unirest.request.body.RequestBodyEntity;

import io.vertx.core.json.JsonObject;

public class Services {

	public static boolean generateInvoice(JsonObject data) {
		try {
			JsonObject postObj = new JsonObject();
			postObj.put("from","Meesho");
			postObj.put("to",data.getString("customerName"));
			postObj.put("logo",data.getString("customerName"));
			postObj.put("from","Meesho");
			
			HttpResponse<String> response = Unirest.post("https://invoice-generator.com/")
					  .header("content-type", "application/json")
					  .header("cache-control", "no-cache")
					  .header("postman-token", "03b348a2-c5f5-ce65-1498-53b45479ddbf")
					  .body(data)
					  //.body("{\"from\":\"Invoiced, Inc.\",\"to\":\"Parag\",\"logo\":\"https://invoiced.com/img/logo-invoice.png\",\"number\":1,\"items\":[{\"name\":\"Starter plan\",\"quantity\":1,\"unit_cost\":99}],\"notes\":\"Thanks for your business!\"}")
					  .asString();
			InputStream is = response.getRawBody();
			FileOutputStream fos = new FileOutputStream(new File("yolo.pdf"));
			int inByte;
			while((inByte = is.read()) != -1)
			     fos.write(inByte);
			
			fos.close();
			is.close();
			
		} catch (IOException | UnirestException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		return true;
	}
}
